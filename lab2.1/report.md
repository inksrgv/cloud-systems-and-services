# Лабораторная работа №2

## Задание
1. Написать “плохой” Dockerfile, в котором есть не менее трех “bad practices” по написанию докерфайлов
2. Написать “хороший” Dockerfile, в котором эти плохие практики исправлены
3. В Readme описать каждую из плохих практик в плохом докерфайле, почему она плохая и как в хорошем она была исправлена, как исправление повлияло на результат
4. В Readme описать 2 плохих практики по работе с контейнерами. ! Не по написанию докерфайлов, а о том, как даже используя хороший докерфайл можно накосячить именно в работе с контейнерами.

## Ход выполнения работы
Плохой Dockerfile будет выглядеть так:

    FROM python:3.10-alpine
  
    RUN apk update
    RUN apk upgrade

    COPY requirements.txt .

    RUN pip install -r requirements.txt

    COPY . .

    EXPOSE 5000

    CMD [ "python","app.py" ]

Теперь перейдем к описанию "плохих практик", которые есть в данном Dockerfile:
1. Каждая команда, которую нам надо выполнить (в данном случае команды update & upgrade) записаны в отдельную инструкцию RUN. Это плохо, потому что каждая такая инструкция создаст новый слой в контейнере, таким образом увеличив его память. На самом деле, в моем случае это не так уж и сильно усугубляет положение, однако при большем наборе инструкций RUN это может конкретно увеличить размер контейнера и снизить производительность.
2. Не указана рабочая директория с помощью инструкции `WORKDIR`.
3. Из-за строчки `COPY . .` внутрь контейнера копируется все содержимое локальной директории, что может значительно увеличить размеры Dockerfile. Вообще эту инструкцию лучше так не писать, но можно обойти это правило путём создания файла `.dockerignore`, ну или же указанием только необходимых для копирования файлов.
4. Нет чистки от дополнительных зависимостей, которые появляются при установке библиотек или обновлении пакетов.
   

<details>
  <summary> Какие еще есть плохие практики </summary>

  1. Не указывать явно версию образа, которую хочешь установить. Как это выглядит в коде:

    FROM python:latest

  Данная строчка в принципе непредсказуема, тк непонятно, какая именно версия будет установлена. Также при использовании именно такого определения образа могут возникнуть проблемы с совместимостью версий, что тоже не совсем ок.
  
  2. Явное указание полей среды, например для баз данных. Во-первых, данные, хранящиеся таким способом легко потерять. Во-вторых, это небезопасно. 
</details>
