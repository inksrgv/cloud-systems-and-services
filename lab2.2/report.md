# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ2

## –ó–∞–¥–∞–Ω–∏–µ
1. –ù–∞–ø–∏—Å–∞—Ç—å ‚Äú–ø–ª–æ—Ö–æ–π‚Äù Docker compose —Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –Ω–µ –º–µ–Ω–µ–µ —Ç—Ä–µ—Ö ‚Äúbad practices‚Äù –ø–æ –∏—Ö –Ω–∞–ø–∏—Å–∞–Ω–∏—é.
2. –ù–∞–ø–∏—Å–∞—Ç—å ‚Äú—Ö–æ—Ä–æ—à–∏–π‚Äù Docker compose —Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º —ç—Ç–∏ –ø–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã.
3. –í Readme –æ–ø–∏—Å–∞—Ç—å –∫–∞–∂–¥—É—é –∏–∑ –ø–ª–æ—Ö–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –≤ –ø–ª–æ—Ö–æ–º —Ñ–∞–π–ª–µ, –ø–æ—á–µ–º—É –æ–Ω–∞ –ø–ª–æ—Ö–∞—è –∏ –∫–∞–∫ –≤ —Ö–æ—Ä–æ—à–µ–º –æ–Ω–∞ –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
4. –ü–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—É–Ω–∫—Ç–æ–≤ –≤ —Ö–æ—Ä–æ—à–µ–º —Ñ–∞–π–ª–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã —Ç–∞–∫, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ä–∞–º–∫–∞—Ö —ç—Ç–æ–≥–æ compose-–ø—Ä–æ–µ–∫—Ç–∞ —Ç–∞–∫ –∂–µ –ø–æ–¥–Ω–∏–º–∞–ª–∏—Å—å –≤–º–µ—Å—Ç–µ, –Ω–æ –Ω–µ "–≤–∏–¥–µ–ª–∏" –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ —Å–µ—Ç–∏. –í –æ—Ç—á–µ—Ç–µ –æ–ø–∏—Å–∞—Ç—å, –∫–∞–∫ —ç—Ç–æ–≥–æ –¥–æ–±–∏–ª–∏—Å—å –∏ –∫—Ä–∞—Ç–∫–æ –æ–±—ä—è—Å–Ω–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø —Ç–∞–∫–æ–π –∏–∑–æ–ª—è—Ü–∏–∏.

## –•–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã 

### "–ü–ª–æ—Ö–æ–π" Docker compose —Ñ–∞–π–ª

–ü–ª–æ—Ö–æ–π Docker compose –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
    
    version: '3.8'

    services:
      web:
        build: .
        ports:
          - "5000:5000"
        environment:
          - FLASK_APP=/app/main.py
          - FLASK_RUN_HOST=0.0.0.0
          - DATABASE_URL=postgresql://postgres:password@db/postgres

      db:
        image: postgres:latest
        environment:
          POSTGRES_USER: postgres
          POSTGRES_PASSWORD: password
          POSTGRES_DB: postgres
        volumes:
          - pgdata:/var/lib/postgresql/data

      pgadmin:
        image: dpage/pgadmin4
        environment:
          PGADMIN_DEFAULT_EMAIL: vragozina393@gmail.com
          PGADMIN_DEFAULT_PASSWORD: admin
        ports:
          - "8080:80"

        volumes:
          pgdata:

–ü–µ—Ä–µ–π–¥–µ–º –∫ –æ–ø–∏—Å–∞–Ω–∏—é "–ø–ª–æ—Ö–∏—Ö" –ø—Ä–∞–∫—Ç–∏–∫:
1. –Ø–≤–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é –æ–±—Ä–∞–∑–∞. –ù—É —Ç—É—Ç –≤—Å–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±—ã—á–Ω–æ–º—É Dockerfile: —É–∫–∞–∑–∞–Ω–∏–µ —Ç–µ–≥–∞ latest –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é —Å–±–æ—Ä–∫–∏ –∏ —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ —Ü–µ–ª–æ–º. –ï—Å–ª–∏ –≤ –æ–±—ã—á–Ω–æ–º –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–µ —ç—Ç–æ –Ω–µ —Å—É–ø–µ—Ä —Å—Ç—Ä–∞—à–Ω–æ (—Ö–æ—Ç—è –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ), —Ç–æ –≤ docker compose —Ñ–∞–π–ª–µ –º–æ–∂–µ—Ç –≤—ã–ª–µ–∑—Ç–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä –ë–î –∏ –≤–µ–±–∞).
2. –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è. –¢–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ª–µ–≥–∫–æ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞ –∏ –≤–æ–æ–±—â–µ —ç—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ, –æ–ø—è—Ç—å –∂–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±—ã—á–Ω–æ–º—É Dockerfile.
3. –ï—Å–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≥–æ–≤–æ—Ä–∏—Ç—å –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –ø–ª–æ—Ö–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–µ–∫—Ä–µ—Ç–æ–≤. –í–æ–æ–±—â–µ –æ—á–µ–Ω—å –∫—Ä—É—Ç–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö.
4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –í–æ—Ç —ç—Ç–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∫ docker compose. –ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ: –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Å–µ—Ä–≤–∏—Å –∏ –∫–∞–∫–∞—è-—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –í —Å—Ç—Ä—É–∫—Ç—É—Ä–µ .yml —Ñ–∞–π–ª–∞ –æ–Ω–∏ –∏–¥—É—Ç –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º –∏ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, –∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∏–≥–¥–µ –Ω–µ —É–∫–∞–∑–∞–Ω—ã. –í–µ–± —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, –æ–¥–Ω–∞–∫–æ –æ–Ω –Ω–µ —Å–º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ë–î, –Ω–æ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –æ–Ω –∫ –Ω–µ–π —Ç–æ–∂–µ –Ω–µ –º–æ–∂–µ—Ç, –æ–Ω–∞ –≤–µ–¥—å –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞‚Ä¶ –∫—Ä–∏–Ω–∂ üôÅ
4.1. –¢—É—Ç —è —É–∑–Ω–∞–ª–∞, —á—Ç–æ –µ—Å—Ç—å ‚Äú–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã‚Äù depends_on, —Ç–∞–∫–∏–µ –∫–∞–∫ sleep, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è ‚Äú–∑–∞–¥–µ—Ä–∂–∫–∏‚Äù –∏ —Ç–¥. –≠—Ç–æ –∫–æ–Ω–µ—á–Ω–æ –º–æ–∂–µ—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å depends_on
5. –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –≠—Ç–æ –∫—Å—Ç–∞—Ç–∏ –∫ 4 –ø—É–Ω–∫—Ç—É –∑–∞–¥–∞–Ω–∏—è. –≠—Ç–æ –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, —Ç–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—Ç–æ-—Ç–æ –ø–æ–ª—É—á–∏–ª –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—à–µ–º—É –≤–µ–±-—Å–µ—Ä–≤–∏—Å—É, –ø—Ä–∏ —ç—Ç–æ–º –Ω–∞—à–∏ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã. –° –≤–µ–±–∞ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –ª–µ–≥–∫–æ –ø—Ä–æ–π–¥–µ—Ç –∫ –±–¥ –∏ –∑–∞–±–µ—Ä–µ—Ç –æ—Ç—Ç—É–¥–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ–ø—Ä–∏—è—Ç–Ω–µ–Ω—å–∫–æ –ø–æ–ª—É—á–∏—Ç—Å—è). –¢–∞–∫–∂–µ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∫–∞–∫–∏—Ö-—Ç–æ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞ –æ–¥–Ω–æ–≥–æ –Ω–µ–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É –¥—Ä—É–≥–æ–≥–æ.üôÅ

### "–•–æ—Ä–æ—à–∏–π" Docker compose —Ñ–∞–π–ª

–ë—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

    version: '3.8'

    services:
      db:
        image: postgres:13.3
        environment:
          POSTGRES_USER: postgres
          POSTGRES_PASSWORD: /run/secrets/postgres_password
          POSTGRES_DB: postgres
        volumes:
          - pgdata:/var/lib/postgresql/data
        networks:
          - db-network
          - app-network
        secrets:
          - postgres_password

      web:
        build: .
        ports:
          - "5000:5000"
        env_file:
          - .env
        networks:
          - app-network
        depends_on:
          - db

      pgadmin:
        image: dpage/pgadmin4
        environment:
          PGADMIN_DEFAULT_EMAIL: vragozina393@gmail.com
          PGADMIN_DEFAULT_PASSWORD: /run/secrets/pgadmin_password
        ports:
          - "8080:80"
        depends_on:
          - db
        networks:
          - pg-network
        secrets:
          - pgadmin_password

    networks:
      app-network:
      db-network:
      pg-network:

    secrets:
      postgres_password:
        file: postgres_password.txt
      pgadmin_password:
        file: pgadmin_password.txt

    volumes:
      pgdata:

–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
1. –î–æ–±–∞–≤–∏–ª–∞ –≤–µ—Ä—Å–∏—é –æ–±—Ä–∞–∑–∞ –¥–ª—è postgres. –¢–µ–ø–µ—Ä—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ. –ö—Å—Ç–∞—Ç–∏, –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤–µ—Ä—Å–∏—è —Å–∏–ª—å–Ω–æ —Ä–æ–ª—è–µ—Ç, —É –º–µ–Ω—è –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é –∏–∑-–∑–∞ latest.
2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—ã–∂–µ–Ω–∏—è —Å–ø—Ä—è—Ç–∞–Ω—ã –≤ —Ñ–∞–π–ª .env
3. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—É –º–µ–Ω—è —ç—Ç–æ –ø–∞—Ä–æ–ª–∏)
4. –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞: –≤ –º–æ–µ–º —Å–ª—É—á–∞–µ –∏ web –∏ pgadmin –∑–∞–≤–∏—Å–∏–º—ã –æ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
5. –°–µ—Ä–≤–∏—Å—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é networks. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–µ—Ç–∏.

–ó–∞–ø—É—Å—Ç–∏–º —Å–±–æ—Ä–∫—É —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `docker-compose up --build`

![–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-11-07 200704](https://github.com/user-attachments/assets/8e82237d-2a6c-4c4f-9341-210f92fb3446)

–ù—É –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ü–µ—Ä–≤–æ–µ –æ–∫–Ω–æ - –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:

![–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-11-07 200734](https://github.com/user-attachments/assets/053ace03-b88b-4ada-b128-e84a20b84ac7)

–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –ë–î.

![–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-11-07 200742](https://github.com/user-attachments/assets/b92f63a8-e9bf-4da9-bfee-204b337e5536)

–ü—Ä–æ–≤–µ—Ä–∏–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏:

![–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2024-11-07 200748](https://github.com/user-attachments/assets/99b7404e-286f-45d0-b692-14d144799b9f)

–ò—Ç–æ–≥–æ –º—ã –∏–º–µ–µ–º –ø—Ä–æ—Å—Ç—É—é —Ñ–æ—Ä–º—É, –¥–∞–Ω–Ω—ã–µ —Å –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î.

